generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id_usuario       String   @id @default(cuid()) @map("id_usuario")
  id_empresa       String?  @map("id_empresa")
  nome             String   @map("nome") @db.VarChar(255)
  email            String   @unique(map: "users_email_key") @map("email") @db.VarChar(255)
  senha            String   @map("senha")
  perfil           String   @default("user") @map("perfil")
  data_criacao     DateTime @default(now()) @map("data_criacao")
  data_atualizacao DateTime @updatedAt @map("data_atualizacao")
  uploads          Upload[]

  @@map("usuarios")
}

model Upload {
  id               String    @id @default(cuid())
  filename         String
  originalName     String
  size             Int
  mimetype         String
  path             String
  status           String    @default("pending")
  uploadedBy       String
  uploadedAt       DateTime  @default(now())
  processedAt      DateTime?
  errorMessage     String?
  totalRecords     Int?
  processedRecords Int?
  user             User      @relation(fields: [uploadedBy], references: [id_usuario], onDelete: Cascade)

  @@index([uploadedBy], map: "uploads_uploadedBy_fkey")
  @@map("uploads")
}

model Company {
  id_empresa       String   @id @default(cuid()) @map("id_empresa")
  razao_social     String   @map("razao_social") @db.VarChar(255)
  nome_fantasia    String?  @map("nome_fantasia") @db.VarChar(255)
  cnpj             String   @unique(map: "companies_cnpj_key") @map("cnpj") @db.VarChar(18)
  endereco         String   @map("endereco") @db.VarChar(255)
  cidade           String   @map("cidade") @db.VarChar(255)
  estado           String   @map("estado") @db.VarChar(255)
  data_criacao     DateTime @default(now()) @map("data_criacao")
  data_atualizacao DateTime @updatedAt @map("data_atualizacao")

  @@map("empresas")
}
